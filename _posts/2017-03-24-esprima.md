---
layout          : post
title           : "Esprima 语法解析器"
author          : Rzning
date            : 2017-03-24 22:00:00 +0800
modified        : 2017-03-24 22:40:00 +0800
categories      : blog esprima
tags            : Esprima
---

Esprima
=======

### ECMAScript parsing infrastructure for multipurpose analysis 

[Esprima] 是一个用 [ECMAScript] 实现的，高性能 [ECMAScript] 分析器。

官网： <http://esprima.org/> - [[GitHub](https://github.com/jquery/esprima)]

## 特点 [Features]

- 完全支持 ECMAScript 2016 ([ECMA-262 7th Edition])
- 语法树格式：满足 [ESTree] 规范的 [AST 描述符语法]
- 实验性支持 [JSX] 语法,即 [React] 框架的一个语法扩展
- 可选的语法节点位置跟踪 (index-based and line-column)
- [大量的测试](http://esprima.org/test/ci.html) 约 1500 全代码覆盖 [单元测试](https://github.com/jquery/esprima/tree/master/test/fixtures) 。


## 入门 [Getting Started]

[Esprima] 是一个工具，用于执行 JavaScript 的词法（lexical）和语法（syntactic）分析。

### 在 Node.js 环境使用

[Esprima] 支持 [Node.js] v4 及以上版本。

```sh
$ npm install esprima
```

验证模块是否可用：

```sh
$ npm ls
/home/ariya/demo
└── esprima@3.1.3
```

进入 [Node.js] [PEPL] 命令提示符环境：

```sh
$ node
> var esprima = require('esprima');
> esprima.tokenize('/*some code*/');
> esprima.parse('/*some code*/');
```

### 在浏览器环境使用

从一个 CND 库（如 [unpkg]）中载入 [Esprima] 模块。

```html
<script src="https://unpkg.com/esprima@~3.1/dist/esprima.js"></script>
```

载入后，可使用全局变量 `esprima` 得到 [Esprima] 模块引用。

[Esprima] 支持 [AMD] 模块化规范，可以使用一个模块加载器（如 [RequireJS]）来进行加载。

```js
require(['esprima'], function(parser) {
    var syntax = parser.parse('/*some code*/');
    console.log(JSON.stringify(syntax, null, 4));
});
```

### 在 Rhino 或 Nashorn 环境使用

在 [Rhino] 或 [Nashorn] 环境，必须使用 `load` 方法来加载 [Esprima] 。

```js
load('/path/to/esprima.js');
```

以 [Nashorn] shell 命令 [jrunscript] 为例演示其用法。

```sh
$ jrunscript
nashorn> load('esprima.js')
nashorn> ast = esprima.parse('/*some code*/');
nashorn> print(JSON.stringify(ast));
```


## 其他 - 参考文章

- [Getting Started with Esprima - The Jackal of Javascript](http://thejackalofjavascript.com/getting-started-esprima/)



[Esprima]: <http://esprima.org/>
[ECMAScript]: <http://www.ecma-international.org/publications/standards/Ecma-262.htm>
[ECMA-262 7th Edition]: <http://www.ecma-international.org/publications/standards/Ecma-262.htm>
[Features]: <https://github.com/jquery/esprima#features>
[Getting Started]: <https://esprima.readthedocs.io/en/latest/getting-started.html>

[AST 描述符语法]: <https://github.com/estree/estree/blob/master/es5.md>
[ESTree]: <https://github.com/estree/estree>
[JSX]: <https://facebook.github.io/jsx/>
[React]: <https://facebook.github.io/react/>
[Node.js]: <https://nodejs.org/en/>
[PEPL]: <https://en.wikipedia.org/wiki/REPL>
[unpkg]: <https://unpkg.com/>
[AMD]: <https://github.com/amdjs/amdjs-api/wiki/AMD>
[RequireJS]: <http://requirejs.org/>
[Rhino]: <https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino>
[Nashorn]: <https://docs.oracle.com/javase/8/docs/technotes/guides/scripting/nashorn/>
[jrunscript]: <https://docs.oracle.com/javase/8/docs/technotes/tools/windows/jrunscript.html>